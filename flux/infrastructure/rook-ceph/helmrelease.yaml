apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
    name: rook-ceph
    namespace: rook-ceph
spec:
    interval: 30m
    chart:
        spec:
            chart: rook-ceph
            version: ">=1.12.0 <2.0.0" # Pin to a range
            sourceRef:
                kind: HelmRepository
                name: rook-release
                namespace: rook-ceph
            interval: 12h
    install:
        crds: CreateReplace
        remediation:
            retries: 3
    upgrade:
        crds: CreateReplace
        remediation:
            retries: 3
    values:
        # Operator configuration
        resources:
            limits:
                memory: 512Mi
            requests:
                cpu: 100m
                memory: 128Mi
        # Enable monitoring if you have Prometheus
        monitoring:
            enabled: true
        # Configure node affinity if needed
        nodeSelector: {}
        tolerations: []
